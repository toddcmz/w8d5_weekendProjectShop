(()=>{"use strict";const t={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let e;const r=new Uint8Array(16);function i(){if(!e&&(e="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!e))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return e(r)}const s=[];for(let t=0;t<256;++t)s.push((t+256).toString(16).slice(1));const n=function(e,r,n){if(t.randomUUID&&!r&&!e)return t.randomUUID();const o=(e=e||{}).random||(e.rng||i)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,r){n=n||0;for(let t=0;t<16;++t)r[n+t]=o[t];return r}return function(t,e=0){return(s[t[e+0]]+s[t[e+1]]+s[t[e+2]]+s[t[e+3]]+"-"+s[t[e+4]]+s[t[e+5]]+"-"+s[t[e+6]]+s[t[e+7]]+"-"+s[t[e+8]]+s[t[e+9]]+"-"+s[t[e+10]]+s[t[e+11]]+s[t[e+12]]+s[t[e+13]]+s[t[e+14]]+s[t[e+15]]).toLowerCase()}(o)};class o{constructor(t,e,r=[],i=n()){this._fullName=t,this._age=e,this._cart=r,this._id=i}static createNewUser(t,e){return t&&e?new o(t,e):null}get fullName(){return this._fullName}set fullName(t){this._fullName=t}get age(){return this._age}set age(t){this._age=t}get cart(){return this._cart}set cart(t){this._cart=t}get id(){return this._id}set id(t){this._id=t}cartHTMLElement(){const t=document.querySelector("#UserCartList");for(let e of this.cart){const r=document.createElement("div");r.id=e.id,r.className=e.itemName,r.innerText=`${e.itemName}: ${e.description} | $${e.price}`,t.append(r);const i=document.createElement("button");i.id=e.id,i.innerText="Remove",r.appendChild(i),this.addRemoveOneEventListener(i);const s=document.createElement("button");s.id=e.itemName,s.innerText="Remove All",r.appendChild(s),this.addRemoveAllEventListener(s)}}addRemoveOneEventListener(t){t.addEventListener("click",(()=>{document.getElementById(t.id).remove()})),this.removeQuantityFromCart(t.id,1)}addRemoveAllEventListener(t){t.addEventListener("click",(()=>{const e=document.getElementsByClassName(t.id);for(let t of e)t.remove();this.removeFromCart(t.id)}))}addToCart(t){this.cart.push(t),this.cartHTMLElement()}removeFromCart(t){this.cart=this.cart.filter((e=>e.itemName!==t))}removeQuantityFromCart(t,e){let r=0;for(let e=0;e<this.cart.length;e++)this.cart[e].id===t&&(r+=1);if(r<=e)this.removeFromCart(t);else{let r=0;for(let[i,s]of this.cart.entries())s.id===t&&r!==e&&(this.cart.splice(i,1),r+=1)}}cartTotal(){return this.cart.reduce(((t,e)=>t+e.price),0)}printCart(){console.log(this.cart)}}class a{constructor(t,e,r,i=n()){this._itemName=t,this._price=e,this._description=r,this._id=i}get description(){return this._description}set description(t){this._description=t}get price(){return this._price}set price(t){this._price=t}get itemName(){return this._itemName}set itemName(t){this._itemName=t}get id(){return this._id}set id(t){this._id=t}}const c=document.querySelector("#userForm"),m=document.querySelector("#userName"),d=document.querySelector("#userAge"),h=new class{constructor(t=[],e=void 0){this._itemsInShop=t,this._myUser=e;const r=new a("Fridge Shirt",20,"Shirt with a funny haiku"),i=new a("Calvin Shirt",15,"Unlicensed comic material"),s=new a("Vb Shirt",30,"Dryfit sports shirt"),n=new a("Latte",5.5,"Thanks a latte"),o=new a("Capuccino",6,"More foam more yum"),c=new a("Chai",4,"Sweet or spicy or both");this.itemsInShop.push(r),this.itemsInShop.push(i),this.itemsInShop.push(s),this.itemsInShop.push(n),this.itemsInShop.push(o),this.itemsInShop.push(c)}get itemsInShop(){return this._itemsInShop}set itemsInShop(t){this._itemsInShop=t}get myUser(){return this._myUser}set myUser(t){this._myUser=t}showItems(){const t=document.querySelector("#ShopStockList");for(let e of this.itemsInShop){const r=document.createElement("div");r.id=e.id,r.innerText=`${e.itemName}: ${e.description} | $${e.price}`,t.append(r);const i=document.createElement("button");i.id=e.id,i.innerText="Add to Cart",this.addToCartEventListener(i,e)}}loginUser(t){this.myUser=t,this.showItems()}addToCartEventListener(t,e){t.addEventListener("click",(()=>{void 0!==this.myUser&&this.myUser.addToCart(e)}))}};c.addEventListener("submit",(t=>{t.preventDefault();const e=new o(m.value,d.valueAsNumber);h.loginUser(e)}))})();