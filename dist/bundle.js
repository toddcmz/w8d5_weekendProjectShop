(()=>{"use strict";const e={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let t;const r=new Uint8Array(16);function i(){if(!t&&(t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!t))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return t(r)}const n=[];for(let e=0;e<256;++e)n.push((e+256).toString(16).slice(1));const s=function(t,r,s){if(e.randomUUID&&!r&&!t)return e.randomUUID();const o=(t=t||{}).random||(t.rng||i)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,r){s=s||0;for(let e=0;e<16;++e)r[s+e]=o[e];return r}return function(e,t=0){return(n[e[t+0]]+n[e[t+1]]+n[e[t+2]]+n[e[t+3]]+"-"+n[e[t+4]]+n[e[t+5]]+"-"+n[e[t+6]]+n[e[t+7]]+"-"+n[e[t+8]]+n[e[t+9]]+"-"+n[e[t+10]]+n[e[t+11]]+n[e[t+12]]+n[e[t+13]]+n[e[t+14]]+n[e[t+15]]).toLowerCase()}(o)};class o{constructor(e,t,r=[],i=s()){this._fullName=e,this._age=t,this._cart=r,this._id=i}createNewUser(e,t){return e&&t?new o(e,t):null}get fullName(){return this._fullName}set fullName(e){this._fullName=e}get age(){return this._age}set age(e){this._age=e}get cart(){return this._cart}set cart(e){this._cart=e}get id(){return this._id}set id(e){this._id=e}cartHTMLElement(){document.querySelector("#userCartList").remove();const e=document.createElement("ul");e.id="userCartList",document.getElementsByClassName("cartContainer")[0].append(e);for(let t of this.cart){const r=document.createElement("div");r.id=t.id,r.className=t.itemName,r.innerText=`${t.itemName}: ${t.description} | $${t.price}`,e.append(r);const i=document.createElement("button");i.id=t.id,i.innerText="Remove",r.appendChild(i),this.addRemoveOneEventListener(i);const n=document.createElement("button");n.id=t.itemName,n.innerText="Remove All",r.appendChild(n),this.addRemoveAllEventListener(n)}}addRemoveOneEventListener(e){e.addEventListener("click",(()=>{document.getElementById(e.id).remove(),this.removeQuantityFromCart(e.id,1)}))}addRemoveAllEventListener(e){e.addEventListener("click",(()=>{const t=document.getElementsByClassName(e.id);console.log(t);for(let e of Object.values(t))e.remove();this.removeFromCart(e.id)}))}addToCart(e){console.log(e,"thing getting pushed to cart"),this.cart.push(e),this.cartHTMLElement(),this.updateCartTotal()}updateCartTotal(){document.querySelector("#currentCartTotal").remove();const e=document.createElement("p");e.innerText=`Current Total: ${this.cartTotal()}`,e.id="currentCartTotal",document.querySelector("#cartTotalContainer").appendChild(e)}removeFromCart(e){this.cart=this.cart.filter((t=>t.itemName!==e)),this.updateCartTotal()}removeQuantityFromCart(e,t){let r=0;for(let t=0;t<this.cart.length;t++)this.cart[t].id===e&&(r+=1);if(r<t)this.removeFromCart(e);else{let r=0;for(let[i,n]of this.cart.entries())n.id===e&&r!==t&&(this.cart.splice(i,1),r+=1);this.updateCartTotal()}}cartTotal(){return this.cart.reduce(((e,t)=>e+t.price),0)}printCart(){console.log(this.cart)}}class a{constructor(e,t,r,i=s()){this._itemName=e,this._price=t,this._description=r,this._id=i}get description(){return this._description}set description(e){this._description=e}get price(){return this._price}set price(e){this._price=e}get itemName(){return this._itemName}set itemName(e){this._itemName=e}get id(){return this._id}set id(e){this._id=e}}const c=document.querySelector("#userForm"),d=document.querySelector("#userName"),m=document.querySelector("#userAge"),u=new class{constructor(e=[],t=void 0){this._itemsInShop=e,this._myUser=t;const r=new a("Fridge Shirt",20,"Shirt with a funny haiku"),i=new a("Calvin Shirt",15,"Unlicensed comic material"),n=new a("Vb Shirt",30,"Dryfit sports shirt"),s=new a("Latte",5.5,"Thanks a latte"),o=new a("Capuccino",6,"More foam more yum"),c=new a("Chai",4,"Sweet or spicy or both");this.itemsInShop.push(r),this.itemsInShop.push(i),this.itemsInShop.push(n),this.itemsInShop.push(s),this.itemsInShop.push(o),this.itemsInShop.push(c)}get itemsInShop(){return this._itemsInShop}set itemsInShop(e){this._itemsInShop=e}get myUser(){return this._myUser}set myUser(e){this._myUser=e}showItems(){const e=document.querySelector("#shopStockList");for(let t of this.itemsInShop){const r=document.createElement("div");r.id=t.id,r.innerHTML=`<u>${t.itemName}</u> | ${t.description} | <i>$${t.price}</i><br>`,e.appendChild(r);const i=document.createElement("button");i.id=t.id,i.innerText="Add to Cart",r.appendChild(i),this.addToCartEventListener(i,t)}}loginUser(e){this.myUser=e,this.showItems()}addToCartEventListener(e,t){e.addEventListener("click",(()=>{const e=new a(t.itemName,t.price,t.description,s());void 0!==this.myUser&&this.myUser.addToCart(e)}))}};console.log(d.value,parseInt(m.value)),c.addEventListener("submit",(e=>{e.preventDefault();const t=new o(d.value,parseInt(m.value));u.loginUser(t),console.log(u.myUser)}))})();