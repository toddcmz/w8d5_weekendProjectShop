(()=>{"use strict";const e={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let t;const r=new Uint8Array(16);function i(){if(!t&&(t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!t))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return t(r)}const s=[];for(let e=0;e<256;++e)s.push((e+256).toString(16).slice(1));const n=function(t,r,n){if(e.randomUUID&&!r&&!t)return e.randomUUID();const o=(t=t||{}).random||(t.rng||i)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,r){n=n||0;for(let e=0;e<16;++e)r[n+e]=o[e];return r}return function(e,t=0){return(s[e[t+0]]+s[e[t+1]]+s[e[t+2]]+s[e[t+3]]+"-"+s[e[t+4]]+s[e[t+5]]+"-"+s[e[t+6]]+s[e[t+7]]+"-"+s[e[t+8]]+s[e[t+9]]+"-"+s[e[t+10]]+s[e[t+11]]+s[e[t+12]]+s[e[t+13]]+s[e[t+14]]+s[e[t+15]]).toLowerCase()}(o)};class o{constructor(e,t,r=[],i=n()){this._fullName=e,this._age=t,this._cart=r,this._id=i}createNewUser(e,t){return e&&t?new o(e,t):null}get fullName(){return this._fullName}set fullName(e){this._fullName=e}get age(){return this._age}set age(e){this._age=e}get cart(){return this._cart}set cart(e){this._cart=e}get id(){return this._id}set id(e){this._id=e}cartHTMLElement(){const e=document.querySelector("#UserCartList");for(let t of this.cart){const r=document.createElement("div");r.id=t.id,r.className=t.itemName,r.innerText=`${t.itemName}: ${t.description} | $${t.price}`,e.append(r);const i=document.createElement("button");i.id=t.id,i.innerText="Remove",r.appendChild(i),this.addRemoveOneEventListener(i);const s=document.createElement("button");s.id=t.itemName,s.innerText="Remove All",r.appendChild(s),this.addRemoveAllEventListener(s)}}addRemoveOneEventListener(e){e.addEventListener("click",(()=>{document.getElementById(e.id).remove()})),this.removeQuantityFromCart(e.id,1)}addRemoveAllEventListener(e){e.addEventListener("click",(()=>{const t=document.getElementsByClassName(e.id);for(let e of t)e.remove();this.removeFromCart(e.id)}))}addToCart(e){this.cart.push(e),this.cartHTMLElement()}removeFromCart(e){this.cart=this.cart.filter((t=>t.itemName!==e))}removeQuantityFromCart(e,t){let r=0;for(let t=0;t<this.cart.length;t++)this.cart[t].id===e&&(r+=1);if(r<=t)this.removeFromCart(e);else{let r=0;for(let[i,s]of this.cart.entries())s.id===e&&r!==t&&(this.cart.splice(i,1),r+=1)}}cartTotal(){return this.cart.reduce(((e,t)=>e+t.price),0)}printCart(){console.log(this.cart)}}class a{constructor(e,t,r,i=n()){this._itemName=e,this._price=t,this._description=r,this._id=i}get description(){return this._description}set description(e){this._description=e}get price(){return this._price}set price(e){this._price=e}get itemName(){return this._itemName}set itemName(e){this._itemName=e}get id(){return this._id}set id(e){this._id=e}}const c=document.querySelector("#userForm"),m=document.querySelector("#userName"),d=document.querySelector("#userAge"),h=new class{constructor(e=[],t=void 0){this._itemsInShop=e,this._myUser=t;const r=new a("Fridge Shirt",20,"Shirt with a funny haiku"),i=new a("Calvin Shirt",15,"Unlicensed comic material"),s=new a("Vb Shirt",30,"Dryfit sports shirt"),n=new a("Latte",5.5,"Thanks a latte"),o=new a("Capuccino",6,"More foam more yum"),c=new a("Chai",4,"Sweet or spicy or both");this.itemsInShop.push(r),this.itemsInShop.push(i),this.itemsInShop.push(s),this.itemsInShop.push(n),this.itemsInShop.push(o),this.itemsInShop.push(c)}get itemsInShop(){return this._itemsInShop}set itemsInShop(e){this._itemsInShop=e}get myUser(){return this._myUser}set myUser(e){this._myUser=e}showItems(){const e=document.querySelector("#shopStockList");for(let t of this.itemsInShop){const r=document.createElement("div");r.id=t.id,r.innerText=`${t.itemName}: ${t.description} | $${t.price}`,e.appendChild(r);const i=document.createElement("button");i.id=t.id,i.innerText="Add to Cart",r.appendChild(i),this.addToCartEventListener(i,t)}}loginUser(e){this.myUser=e,this.showItems()}addToCartEventListener(e,t){e.addEventListener("click",(()=>{void 0!==this.myUser&&this.myUser.addToCart(t)}))}};console.log(m.value,parseInt(d.value)),c.addEventListener("submit",(e=>{e.preventDefault();const t=new o(m.value,parseInt(d.value));h.loginUser(t),console.log(h.myUser)}))})();